version: '2.1'

services:
  pbs:
    image: ${IMAGE:-ayufan/proxmox-backup-server:${TAG:-latest}}
    ports:
      - 8007:8007
    mem_limit: 2G
    volumes:
      - pbs_etc:/etc/proxmox-backup
      - pbs_logs:/var/log/proxmox-backup
      - pbs_lib:/var/lib/proxmox-backup
      - nuernberg:/nuernberg
    tmpfs:
      - /run
    cap_add:
      - SYS_RAWIO # smartctl support
    #devices: # smartctl support
    #  - /dev/sda
    #  - /dev/sdb
    restart: unless-stopped
    stop_signal: SIGHUP

volumes:
  pbs_etc:
  pbs_logs:
  pbs_lib:
  nuernberg:
    driver: local
    driver_opts:
      type: ''
      o: bind
      device: /media/julian/nuernberg-nfs-1tb
